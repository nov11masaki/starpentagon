# ⭐ 星形五角形AI学習チューター

星形五角形問題に特化した個別指導AIチューターWebアプリケーションです。142件の実際の解答データセットを基に、12+1種類の解法パターンを認識し、学習者の思考プロセスに応じた段階的な学習支援を提供します。

## 🎯 プロジェクト概要

### 主な特徴
- **星形五角形専用**: 星形五角形の面積・角度問題に完全特化
- **実データ活用**: 142件の実際の解答例から学習パターンを抽出
- **12+1解法パターン**: 実データから分類された多様な解法アプローチに対応
- **段階的AI指導**: 答えを教えずに思考プロセスをガイド
- **リアルタイム分析**: Google Gemini APIによる高精度な解法推定

### 解法パターン（実データベース）
1. **外接円利用** - 円周角を用いた角度計算
2. **座標設定** - 座標系での頂点配置と計算
3. **三角形分割** - 星形を三角形に分割して計算
4. **ベクトル計算** - ベクトルの内積・外積を活用
5. **回転変換** - 回転行列による幾何変換
6. **複素数表現** - 複素平面での表現と計算
7. **三角関数直接** - 正弦・余弦定理の直接適用
8. **相似・合同** - 図形の相似性・合同性を利用
9. **面積公式** - ヘロンの公式等の面積公式適用
10. **黄金比活用** - 五角形特有の黄金比を利用
11. **対称性利用** - 星形の対称性を活用
12. **数値計算** - 近似値による数値的解法
13. **その他のアプローチ** - 上記以外の独創的解法

## 🛠️ 技術スタック

- **バックエンド**: Python, Flask
- **AI/ML**: Google Gemini API
- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **数式レンダリング**: MathJax
- **画像処理**: OpenCV (手書き認識用)
- **データベース**: JSON形式の実解答データセット

## 📊 データセット

### 実解答データベース
- **142件の解答例**: 実際の学習者による多様な解法
- **12種類の解法分類**: データ分析により抽出されたパターン
- **ステップ画像**: 各解答の段階的な手順を画像で記録
- **完成解答画像**: 最終的な解答の完成形を保存

## 🛠️ 技術スタック

- **バックエンド**: Python, Flask
- **AI/ML**: Google Gemini API
- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **数式レンダリング**: MathJax
- **開発環境**: Visual Studio Code

## 📋 システム要件

- Python 3.8以上
- Google Gemini API キー
- モダンなWebブラウザ (Chrome, Firefox, Safari, Edge)
- **注意**: データセットは大容量のため、リポジトリには含まれていません

## 🚀 セットアップ手順

### 1. リポジトリのクローンと依存関係のインストール

```bash
# プロジェクトのクローン
git clone https://github.com/nov11masaki/starpentagon.git
cd starpentagon

# 仮想環境の作成と有効化
python -m venv .venv
source .venv/bin/activate  # macOS/Linux
# または
.venv\\Scripts\\activate  # Windows

# 依存関係のインストール
pip install -r requirements.txt
```

### 2. 環境変数の設定

```bash
# .env.example をコピー
cp .env.example .env

# .env ファイルを編集してGemini API キーを設定
GEMINI_API_KEY=your_gemini_api_key_here
```

### 3. データセットの準備

**注意**: データセットファイル（142件の解答画像、約43MB）は別途準備が必要です。
- `dataset/dataset.json` - 解答データのメタデータ
- `dataset/solution_types.json` - 解法パターン分類
- `dataset/final/` - 完成解答画像（142件）
- `dataset/steps/` - 段階的手順画像（約6000件）

### 4. アプリケーションの起動

```bash
python app.py
```

星形五角形学習システムは `http://localhost:5002` で起動します。

## 📖 使用方法

### 基本的な使い方

1. **問題表示**: 星形五角形の問題が自動表示
2. **解答入力**: 思考プロセスを手書きまたはテキストで入力
3. **解法推定**: AIが12+1のパターンから解法を推定
4. **段階的ヒント**: 解法に応じた適切なヒントを段階的に提供
5. **困難度判定**: 学習者の状況に応じて支援レベルを調整

### 解法推定システム

AIは以下の観点から解法を分析：
- **キーワード検出**: 解法特有の用語や記号を認識
- **手順パターン**: 解答の進め方から解法アプローチを推定
- **図形要素**: 描画された図形から解法タイプを判定
- **進捗段階**: 現在の解答がどの段階にあるかを評価

### ヒントシステム

- **レベル1 (励まし)**: 学習意欲を維持する声かけ
- **レベル2 (方向性)**: 解法の大まかな方向を示唆
- **レベル3 (具体策)**: より具体的な次のステップを提示
- **レベル4+ (詳細)**: 解法の詳細な手順をガイド

## 🏗️ プロジェクト構造

```
starpentagon/
├── app.py                      # メインアプリケーション
├── requirements.txt            # Python依存関係
├── .env.example               # 環境変数テンプレート
├── .gitignore                 # Git除外設定
├── modules/                   # アプリケーションモジュール
│   ├── __init__.py
│   ├── star_pentagon_engine.py    # 星形五角形専用AIエンジン
│   ├── star_pentagon_database.py  # データベース管理
│   ├── handwriting_recognizer.py  # 手書き認識
│   ├── hint_generator.py          # ヒント生成システム
│   └── realtime_support.py        # リアルタイム支援
├── templates/                 # HTMLテンプレート
│   └── star_pentagon_index.html   # 星形五角形専用UI
├── static/                    # 静的ファイル
│   ├── css/
│   │   └── star_pentagon.css      # 専用スタイル
│   └── js/
│       └── star_pentagon.js       # 専用JavaScript
├── dataset/                   # データセット（.gitignoreで除外）
│   ├── dataset.json              # 解答メタデータ
│   ├── solution_types.json       # 解法パターン分類
│   ├── final/                    # 完成解答画像（142件）
│   └── steps/                    # 段階画像（約6000件）
└── README.md
```

## 🔧 開発・カスタマイズ

### 新しい解法パターンの追加

`modules/star_pentagon_engine.py` の `solution_patterns` に新しいパターンを追加：

```python
"新解法パターン": {
    'keywords': ['キーワード1', 'キーワード2'],
    'description': '解法の説明',
    'typical_steps': [...],
    'difficulty_indicators': {...}
}
```

### APIエンドポイント

- `GET /star_pentagon` - 星形五角形学習ページ
- `POST /api/star_pentagon/analyze` - 解法分析とヒント生成
- `GET /api/star_pentagon/patterns` - 利用可能な解法パターン一覧

## 📊 AI分析機能

### 解法推定アルゴリズム
- **パターンマッチング**: 12種類の既知パターンとの類似度計算
- **キーワード分析**: 解法特有の数学用語の検出
- **進捗推定**: 解答の完成度と次に必要なステップの予測
- **困難度判定**: 学習者が躓いているポイントの特定

### 学習支援システム
- **個別最適化**: 学習者の理解度に応じたヒント調整
- **段階的指導**: 答えを直接教えない教育的配慮
- **多様性対応**: 複数の正解ルートを認識・支援
- **リアルタイム評価**: 即座の分析とフィードバック提供

## 🎨 UI/UX特徴

- **星形五角形専用**: 問題に特化した最適化されたレイアウト
- **手書き対応**: 直感的な手書き入力インターフェース
- **数式美麗表示**: MathJaxによる高品質な数式レンダリング
- **レスポンシブ**: PC・タブレット・スマートフォン対応
- **リアルタイム**: 入力に応じた即座の分析・応答

## 🔒 セキュリティ・プライバシー

- **API キー保護**: 環境変数による安全な管理
- **データ暗号化**: 学習データの適切な保護
- **入力検証**: 悪意のある入力に対する防御
- **プライバシー**: 個人の学習データは保存しない設計

## 📈 今後の開発予定

### フェーズ2の機能拡張
- **手書き認識強化**: より高精度な手書き数式・図形認識
- **リアルタイム指導**: 描画中のリアルタイム解法推定
- **学習履歴**: 個人の学習進捗と苦手分野の分析
- **他図形対応**: 正多角形や複合図形への対応拡張
- **協調学習**: 複数学習者間での解法共有機能

### 技術的改善
- **パフォーマンス最適化**: より高速な解法推定アルゴリズム
- **データセット拡張**: より多様な解答パターンの収集
- **AI精度向上**: より細かな解法分類と推定精度向上

## 🤝 貢献

### 貢献方法
プロジェクトへの貢献を歓迎します：
- **バグレポート**: GitHubのIssuesでバグ報告
- **新機能提案**: 学習支援機能の改善提案
- **解答データ**: 新しい解法パターンの提供
- **プルリクエスト**: コード改善の直接的な貢献

### 開発ガイドライン
- 教育的価値を最優先に考慮
- 学習者の自主性を尊重する設計
- 数学的正確性の徹底した検証
- ユーザビリティの継続的改善

## 📄 ライセンス

MIT License - 教育目的での自由な利用・改変を推奨

## 📞 サポート・問い合わせ

- **技術的問題**: [GitHub Issues](https://github.com/nov11masaki/starpentagon/issues)
- **教育的提案**: 新しい指導方法や学習効果の向上案
- **データ貢献**: 新しい解答パターンや問題バリエーション

---

**⭐ 星形五角形を通じて、幾何学の美しさと数学的思考の深さを学習者に伝えることが、このプロジェクトの使命です。** 

**🌟 全ての学習者が数学の魅力を発見し、論理的思考力を育むサポートを目指しています。**
